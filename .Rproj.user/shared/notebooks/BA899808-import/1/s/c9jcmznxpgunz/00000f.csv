"0","agg_dept <- master_df_communal |>
  group_by(code_departement = code_departement.x, departement) |>
  summarise(
    n_entreprises = n(),
    score_egapro_moyen       = weighted.mean(index, poids, na.rm = TRUE),
    part_cadres_total_moyenne = mean(part_cadres_total, na.rm = TRUE),
    tx_tps_partiel_femmes_moyen = mean(tx_tps_partiel_femmes, na.rm = TRUE),
    .groups = ""drop""
  ) |> arrange(desc(score_egapro_moyen))
"
"1","[1m[33mError[39m in `summarise()`:[22m
[38;5;232m[36mâ„¹[38;5;232m In argument: `score_egapro_moyen =
  weighted.mean(index, poids, na.rm = TRUE)`.
[36mâ„¹[38;5;232m In group 1: `code_departement = ""75""` and `departement
  = ""Paris""`.[39m
[1mCaused by error:[22m
[33m![39m object 'poids' not found
[90mRun `]8;;x-r-run:rlang::last_trace()rlang::last_trace()]8;;` to see where the error occurred.[39m
"

"0","# 2.1 Préparation des données Egapro"
"0","egapro_prepared <- prepare_egapro_data(raw_egapro)"
"2","--- Préparation et standardisation des données Egapro ---
"
"2","✅ Préparation Egapro terminée : 110070 observations standardisées.
"
"0","# 2.2 Nettoyage des données SIRENE (conservation des sièges sociaux)"
"0","sirene_clean <- clean_sirene_data(raw_sirene)"
"2","--- Nettoyage des données SIRENE ---
"
"2","✅ Nettoyage SIRENE OK : 10440 sièges sociaux géolocalisés.
"
"0","# 2.3 Calcul des indicateurs socio-démographiques au niveau communal"
"0","communes_features <- create_socio_features("
"0","  df_pop_structure = raw_pop_structure,"
"0","  df_ic = raw_ic_activite,"
"0","  df_act5 = raw_act5"
"0",")"
"2","--- Création des indicateurs socio-démographiques (IC + ACT5) ---
"
"2","✅ Indicateurs calculés pour 34918 communes.
"
"0","paris_commune_data <- communes_features %>% filter(code_commune == ""75056"")"
"0",""
"0","if(nrow(paris_commune_data) > 0) {"
"0","    codes_arrondissements <- sprintf(""751%02d"", 1:20)"
"0","    paris_arrondissements_data <- paris_commune_data[rep(1, 20), ] %>%"
"0","        mutate(code_commune = codes_arrondissements)"
"0","    communes_features <- bind_rows(communes_features, paris_arrondissements_data)"
"0","}"
